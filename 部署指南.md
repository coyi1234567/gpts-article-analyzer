# 🚀 超级阅读研究助手 - 完整部署指南

## 📋 项目概述

**超级阅读研究助手**是一个专业的文章解读与核查助手，支持微信、小红书、知乎、微博等多平台内容分析，具备图文结合分析能力。

### ✨ 核心功能
- 多平台文章抓取（微信、小红书、知乎、微博等）
- 图文结合智能分析
- 图片代理服务（解决防盗链问题）
- 7天图片缓存机制
- 结构化分析框架

## 🛠️ 部署选项

### 方案一：Vercel部署（推荐）

#### 1. 准备工作
- GitHub账号
- Vercel账号（免费）

#### 2. 部署步骤
1. **Fork仓库**
   - 访问：https://github.com/coyi1234567/gpts-article-analyzer
   - 点击右上角"Fork"按钮

2. **连接Vercel**
   - 访问：https://vercel.com
   - 使用GitHub账号登录
   - 点击"New Project"
   - 选择您Fork的仓库

3. **配置部署**
   - 项目名称：`gpts-article-analyzer`
   - Framework Preset：选择"Other"
   - Build Command：留空
   - Output Directory：留空
   - Install Command：`pip install -r requirements.txt`

4. **环境变量（可选）**
   ```
   FLASK_ENV=production
   FLASK_DEBUG=False
   PORT=5001
   ```

5. **部署**
   - 点击"Deploy"
   - 等待部署完成（约2-3分钟）

#### 3. 获取部署地址
部署完成后，您会得到类似这样的地址：
```
https://gpts-article-analyzer-xxx.vercel.app
```

### 方案二：Render部署

#### 1. 准备工作
- GitHub账号
- Render账号（免费）

#### 2. 部署步骤
1. **连接GitHub**
   - 访问：https://render.com
   - 使用GitHub账号登录
   - 点击"New +" → "Web Service"

2. **配置服务**
   - Connect Repository：选择您的仓库
   - Name：`gpts-article-analyzer`
   - Environment：`Python 3`
   - Build Command：`pip install -r requirements.txt`
   - Start Command：`python app.py`

3. **部署**
   - 点击"Create Web Service"
   - 等待部署完成（约5-10分钟）

### 方案三：Hugging Face Spaces部署

#### 1. 准备工作
- GitHub账号
- Hugging Face账号（免费）

#### 2. 部署步骤
1. **创建Space**
   - 访问：https://huggingface.co/spaces
   - 点击"Create new Space"
   - 填写信息：
     - Owner：您的用户名
     - Space name：`gpts-article-analyzer`
     - SDK：选择"Docker"
     - Hardware：选择"CPU Basic"

2. **连接仓库**
   - 在Space设置中连接您的GitHub仓库
   - Hugging Face会自动检测Dockerfile并开始构建

3. **等待部署**
   - 构建过程约5-10分钟
   - 部署完成后获得公共URL

## 🤖 GPTs配置

### 1. 创建GPTs
1. 访问：https://chat.openai.com/gpts
2. 点击"Create a GPT"
3. 选择"Configure"标签

### 2. 基本信息配置
- **Name**: `超级阅读研究助手`
- **Description**: `专业的文章解读与核查助手，支持微信、小红书、知乎、微博等多平台内容分析，具备图文结合分析能力`

### 3. Instructions配置
```
你是"超级阅读研究助手（核查 + 计算机扩展）"。

# 一、时间行头（必须）
- 在处理任何用户请求前，先获取当前北京时间
- 将时间格式化为：🕒 北京时间 YYYY-MM-DD(周X) HH:MM，并在**所有回复的第一行**输出

# 二、抓取与分析流程
当用户提供文章链接时，使用extract_article函数获取文章内容，然后进行深度分析。

重要：每张图片都会提供两个URL：
- `original_url`: 原始图片链接（可能被防盗链保护）
- `proxy_url`: 代理图片链接（可以正常显示）

在分析图片时，请使用 `proxy_url` 来获取图片内容，这样可以看到完整的图片信息。

# 三、分析框架（按需自适配混合类型）
**输出深度**：默认"标准版"；若用户指定"简要版/扩展版"，按下述差异化输出。

## 1. 基础信息
- 标题、作者（若有）、发布时间（若识别）、平台识别、原文链接、抓取状态

## 2. 类型识别
- 自动判断：论文/新闻报道/评论/科普/说明书/技术类（计算机/大模型/软件）/生活分享/产品评测。如混合，逐类分析。

## 3. 结构化分析（按类型套件）
- **论文**：研究问题→方法→数据→结论→局限→相关工作对比
- **新闻**：5W1H摘要→信息来源可信度→时效性→潜在偏见
- **评论**：主要观点→论证方式→修辞策略→潜在偏见
- **科普**：核心知识点→举例/比喻→科学性准确性→受众适配性
- **说明书**：目标用户→步骤完整性→术语准确性→易用性
- **技术类**：代码分析→正确性→主流实践对比→AI概念核查→实验与结论可信度
- **生活分享**：内容真实性→实用价值→情感表达→传播动机
- **产品评测**：评测维度→数据支撑→对比公正性→商业利益披露

## 4. 图文结合分析
- 对每张图片进行详细解读，分析图片与文字内容的关联性
- 识别图片类型：封面图/配图/数据图表/现场照片/产品图/截图等
- 评估图片对文章观点的支撑作用
- 注意图片中的关键信息、数据、人物、场景等细节

## 5. 真伪核查与谣言识别
- 对关键论点逐条给出标签：
  ✅ 已验证（权威来源支持）/ ⚠️ 待研究（前沿探索/假设）/ ❌ 错误 / ❓证据不足
- 如有必要，给出"文章说法 vs 权威资料"的对照表
- 无法联网核实时，**不要编造来源**，改为"待验证"

## 6. 综合评价
- 文章价值（学术/新闻/教育/实用/工程/娱乐）
- 可信度评级：高/中/低
- 给读者建议：哪些可采信，哪些需谨慎

# 四、输出规范
- 全文使用Markdown分级标题，关键结论前加 ✅ / ⚠️ / ❌
- 代码段用代码块并加简注
- 适当使用表格或Mermaid简图（如流程/结构）
- 末尾固定附：
  - 原文链接：<用户原始链接>
  - 分析时间：{当前时间}

# 五、深度选项（生成策略）
- **简要版**：300–600字要点+结论，尽量列表化
- **标准版**（默认）：完整结构化分析（上述1–6节）
- **扩展版**：在标准版基础上，补充同类方法横评、可复现实操建议

# 六、平台适配
- 支持微信公众平台、小红书、知乎、微博、今日头条等主流平台
- 根据不同平台特点调整分析重点
- 保持客观、专业的分析态度
```

### 4. Actions配置
点击"Create new action"，在Schema中粘贴：

```json
{
  "openapi": "3.1.0",
  "info": {
    "title": "GPTs Article Extractor API",
    "version": "1.0.0",
    "description": "API for extracting article content (text and image URLs) from a given URL for GPTs analysis."
  },
  "servers": [
    {
      "url": "YOUR_DEPLOYED_URL",
      "description": "Deployed API Server"
    }
  ],
  "paths": {
    "/extract": {
      "post": {
        "operationId": "extract_article",
        "summary": "Extract article content from a URL",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "url": {
                    "type": "string",
                    "description": "要提取的文章链接（支持微信、小红书、知乎、微博等平台）"
                  }
                },
                "required": ["url"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully extracted article content.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {"type": "boolean"},
                    "data": {
                      "type": "object",
                      "properties": {
                        "title": {"type": "string"},
                        "content": {"type": "string"},
                        "author": {"type": "string"},
                        "publish_time": {"type": "string"},
                        "summary": {"type": "string"},
                        "images": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "original_url": {"type": "string", "description": "原始图片链接"},
                              "proxy_url": {"type": "string", "description": "代理图片链接（可正常显示）"},
                              "alt": {"type": "string", "description": "图片alt属性"},
                              "title": {"type": "string", "description": "图片title属性"},
                              "index": {"type": "integer", "description": "图片序号"},
                              "description": {"type": "string", "description": "图片描述"}
                            }
                          }
                        },
                        "tags": {"type": "array", "items": {"type": "string"}}
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
```

**注意**：将`YOUR_DEPLOYED_URL`替换为您实际的部署地址。

### 5. 保存并测试
1. 点击右上角"Save"
2. 选择"Only me"或"Anyone with a link"
3. 测试GPTs功能

## 🧪 测试部署

### 1. 健康检查
```bash
curl https://your-deployed-url.vercel.app/health
```

### 2. 文章提取测试
```bash
curl -X POST https://your-deployed-url.vercel.app/extract \
  -H "Content-Type: application/json" \
  -d '{"url": "https://mp.weixin.qq.com/s/7E-Auq1QAdZIyNahFy7yIQ"}'
```

### 3. 图片代理测试
访问任意图片的proxy_url，检查是否能正常显示。

## 🔧 配置说明

### 环境变量
```bash
FLASK_ENV=production      # 生产环境
FLASK_DEBUG=False         # 关闭调试模式
PORT=5001                 # 端口号
```

### 图片缓存配置
- 缓存时间：7天
- 自动过期：604800秒
- 支持所有主流图片格式

## 📊 性能优化

### 1. 缓存策略
- 图片缓存7天，减少重复请求
- 支持CDN加速
- 自动清理过期缓存

### 2. 错误处理
- 完善的异常捕获
- 友好的错误提示
- 自动重试机制

### 3. 安全考虑
- CORS跨域支持
- 请求头伪装
- 超时保护

## 🆘 故障排除

### 常见问题

1. **部署失败**
   - 检查requirements.txt依赖
   - 确认Python版本兼容性
   - 查看部署日志

2. **图片无法显示**
   - 检查图片代理服务
   - 确认URL编码正确
   - 验证网络连接

3. **GPTs调用失败**
   - 检查API地址配置
   - 确认Schema格式正确
   - 验证网络访问权限

### 联系支持
如遇到问题，请：
1. 查看GitHub Issues
2. 提交新的Issue
3. 提供详细的错误信息

## 🎉 完成！

恭喜！您已经成功部署了超级阅读研究助手。现在可以：

1. ✅ 在GPTs中分析任何文章链接
2. ✅ 获得专业的图文结合分析
3. ✅ 享受7天图片缓存服务
4. ✅ 支持多平台内容抓取

开始您的智能阅读之旅吧！🚀